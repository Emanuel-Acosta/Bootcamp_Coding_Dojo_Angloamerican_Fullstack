<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
			crossorigin="anonymous"
		/>
		<title>Login</title>
	</head>
	<body>
		<main>
			<div class="container mt-5">
				<div class="row">
					<!-- Registro (Izquierda) -->
					<div class="col-md-6">
						<h2 class="mb-4">Registro</h2>
						<form action="/registrar" method="POST">
							<input type="hidden" name="which_form" value="register_user" />

							<!-- Mensajes flash específicos para el registro, tanto 'danger' como 'success' -->
							{% with messages = get_flashed_messages(with_categories=true) %}
							{% if messages %}
							<div class="flash-messages mb-3">
								{% for category, message in messages %} {% if category ==
								'danger' %}
								<div class="alert alert-danger" role="alert">{{ message }}</div>
								{% elif category == 'success' %}
								<div class="alert alert-success" role="alert">
									{{ message }}
								</div>
								{% endif %} {% endfor %}
							</div>
							{% endif %} {% endwith %}

							<div class="mb-3">
								<input
									type="text"
									name="nombre"
									class="form-control"
									placeholder="Nombre"
									required
								/>
							</div>
							<div class="mb-3">
								<input
									type="email"
									name="email"
									class="form-control"
									placeholder="E-mail"
									required
								/>
							</div>
							<div class="mb-3">
								<input
									type="text"
									name="apellido"
									class="form-control"
									placeholder="Apellido"
									required
								/>
							</div>
							<div class="mb-3">
								<input
									type="password"
									name="password"
									class="form-control"
									placeholder="Contraseña"
									required
								/>
							</div>
							<div class="mb-3">
								<input
									type="password"
									name="confirmPassword"
									class="form-control"
									placeholder="Confirmar Contraseña"
									required
								/>
							</div>
							<div class="d-grid gap-2">
								<button type="submit" class="btn btn-primary">Registrar</button>
							</div>
						</form>
					</div>

					<!-- Inicio de Sesión (Derecha) -->
					<div class="col-md-6">
						<h2 class="mb-4">Inicio de Sesión</h2>
						<form action="/iniciar_sesion" method="POST">
							<input type="hidden" name="which_form" value="log_in" />

							<!-- Mensajes flash específicos para el inicio de sesión -->
							{% with messages = get_flashed_messages(with_categories=true) %}
							{% if messages %}
							<div class="flash-messages mb-3">
								{% for category, message in messages %} {% if category ==
								'log_in' %}
								<div class="alert alert-danger" role="alert">{{ message }}</div>
								{% endif %} {% endfor %}
							</div>
							{% endif %} {% endwith %}

							<div class="mb-3">
								<input
									type="email"
									name="email"
									class="form-control"
									placeholder="E-mail"
									required
								/>
							</div>
							<div class="mb-3">
								<input
									type="password"
									name="password"
									class="form-control"
									placeholder="Contraseña"
									required
								/>
							</div>
							<div class="d-grid gap-2">
								<button type="submit" class="btn btn-success">
									Iniciar Sesión
								</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</main>
	</body>
</html>
